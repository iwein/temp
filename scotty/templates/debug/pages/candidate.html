<%inherit file="../debug.html"/>


<%def name="title()">Candidate</%def>
<%def name="tests()">
<script>
  var email = guid()+"@hackandcraft.com",
          tests = [
            {'url':'/api/v1/candidates/', 'title': 'candidate-signup',
              data: {first_name: 'Bob', last_name: "Bayley", "email": email, pwd:"welcomepwd"},
              extract:   function(r, extr){return {candidateId: r.id, actToken: r.activation_token}}},

            {'url':function(r, extr){ return '/api/v1/candidates/activate/'+extr.actToken;}, 'title': 'candidate-activation'},

            {'url': function(r, extr){return '/api/v1/candidates/login'}, 'title': 'candidate-login',
              data: {"email": email, pwd:"welcomepwd"}
            },

            {'url': '/api/v1/candidates/me', 'title': 'candidate-me'},
            {'url': '/api/v1/candidates/me/signup_stage', 'title': 'candidate-stage-base'},

            {'url': '/api/v1/candidates/me/picture', 'title': 'candidate-me-picture',
              data: {'url': 'https://media.licdn.com/mpr/mpr/shrink_120_120/p/8/005/02b/072/128f576.jpg'}},

            {'title': 'candidate-me-picture-get',
              execute: function(root, extr){
                root.append('<img src="/api/v1/candidates/me/picture"/>')
              }
            },

            {'url': '/api/v1/candidates/me', 'title': 'candidate-edit-me', method: 'PUT',

              data:{
                first_name: 'Harold',
                last_name: 'Lucky-One',
                contact_phone: '+40 243564375',
                contact_skype: 'super.skype.name',
                contact_line1: 'Super Duper Street 94',
                contact_line2: 'Line 2 Area',
                contact_zipcode: '34567',
                contact_city: {'city': 'Berlin', 'country_iso': 'DE'},
                dob: '2000-02-28',
                pob: 'Krakow, Poland',
                available_date: '2015-04-30',
                willing_to_travel: false,
                summary: 'Supoer Candidate with a lot of skills',
                stackoverflow_url: 'http://meta.stackexchange.com/users/183471/goje87',
                github_url: 'https://github.com/MartinPeschke'

              }},
            {'url': '/api/v1/candidates/me', 'title': 'candidate-me-2'},

            //{'sectionTitle': 'Set Based Endpoints'},

            {'title': 'Languages'},
            {'url': function(r, extr){return '/api/v1/candidates/me/languages'},
              'title': 'set-languages-1', method:'PUT', data: [
              {'language':'English', 'proficiency': 'advanced'},
              {'language':'German', 'proficiency': 'native'},
              {'language':'French', 'proficiency': 'basic'}
            ]},
            {'url': function(r, extr){return '/api/v1/candidates/me/languages'},
              'title': 'set-languages-2', method:'PUT', data: [
              {'language':'Chinese', 'proficiency': 'native'},
              {'language':'English', 'proficiency': 'basic'}
            ]},
            {'url': function(r, extr){return '/api/v1/candidates/me'}, title: 'get-candidate-languages'},
            {'url': '/api/v1/candidates/me/signup_stage', 'title': 'candidate-stage-languages'},


            {'title': 'Preferred Cities'},
            {'url': function(r, extr){return '/api/v1/candidates/me/preferred_cities'},
              'title': 'set-candidate-preferred_cities-1', method:'PUT', data: [
              {'city':'Berlin', 'country_iso': 'DE'},
              {'city':'Leipzig', 'country_iso': 'DE'},
              {'city':'Hamburg', 'country_iso': 'DE'},
              {'city':'Uberlândia', 'country_iso': 'BR'}]},
            {'url': function(r, extr){return '/api/v1/candidates/me/preferred_cities'},
              'title': 'set-candidate-preferred_cities-2', method:'PUT', data: [{'city':'Berlin Schöneberg', 'country_iso': 'DE'}]},
            {'url': function(r, extr){return '/api/v1/candidates/me'}, title: 'get-candidate-preferred_cities'},
            {'url': '/api/v1/candidates/me/signup_stage', 'title': 'candidate-stage-3'},

            {'title': 'Skills'},
            {'url': function(r, extr){return '/api/v1/candidates/me/skills'},
              'title': 'set-skills', method:'PUT', data: [
              {"skill": "PHP", "level":"advanced"},
              {"skill": "Java", "level":"advanced"},
              {"skill": "Python", "level":"basic"},
              {"skill": "Spring", "level":"expert"}],
              extract:   function(r, extr){return {skillId: r.id}}},

            {'url': function(r, extr){return '/api/v1/candidates/me/skills'},
              'title': 'set-skills-2', method:'PUT', data: [
              {"skill": "PHP", "level":"basic"}],
              extract:   function(r, extr){return {skillId: r.id}}},
            {'url': function(r, extr){return '/api/v1/candidates/me'}, 'title': 'get-candidate-skills'},
            {'url': '/api/v1/candidates/me/signup_stage', 'title': 'candidate-stage-skills'},

            //{'sectionTitle': 'Restful Endpoints'},


            {'title': 'Education'},
            {'url': function(r, extr){return '/api/v1/candidates/me/education'}, 'title': 'list-education'},
            {'url': function(r, extr){return '/api/v1/candidates/me/education'}, 'title': 'create-education',
              data: {"institution": "Eidgenössische Technische Hochschule Zürich, Switzerland", "degree":"Bachelor",
                "start":"1999-01-01", "end": "2002-03-31", course:"Design of Intelligent Protoplasma"},
              extract:   function(r, extr){return {educationId: r.id}}},
            {'url': function(r, extr){return '/api/v1/candidates/me/education'}, 'title': 'create-education-2',
              data: {"institution": "Peking University, China", "degree":"Master",
                "start":"2005-01-01", "end": "2006-02-28", course:"Cleanup of Intelligent Protoplasma"}},
            {'url': function(r, extr){return '/api/v1/candidates/me/education'}, 'title': 'list-education-2'},
            {'url': function(r, extr){return '/api/v1/candidates/me/education/'+extr.educationId}, 'title': 'delete-education', method:"DELETE"},
            {'url': function(r, extr){return '/api/v1/candidates/me/education'}, 'title': 'list-education-3'},

            {'url': '/api/v1/candidates/me/signup_stage', 'title': 'candidate-stage-Education'},

            {'title': 'Work Experience'},
            {'url': function(r, extr){return '/api/v1/candidates/me/work_experience'}, 'title': 'list-work_experience'},
            {'url': function(r, extr){return '/api/v1/candidates/me/work_experience'}, 'title': 'create-work_experience',
              data: {"company": "Intel Corp.", "role":"Project Architect",
                location: {"city": "Überlingen", country_iso: 'DE'}, "start":"2004-01-01", "end": "2004-03-31", summary:"Design of Intelligent Protoplasma"},
              extract:   function(r, extr){return {work_experienceId: r.id}}},
            {'url': function(r, extr){return '/api/v1/candidates/me/work_experience'}, 'title': 'create-work_experience-2',
              data: {"company": "Intel Corp.", "role":"Architect",
                skills : ['Skill1', 'Skill2', 'Skill3'],
                location: {"city": "Berlin", country_iso: 'DE'}, "start":"2004-04-01", "end": "2004-05-01", summary:"Design of Intelligent Protoplasma"}},
            {'url': function(r, extr){return '/api/v1/candidates/me/work_experience'}, 'title': 'list-work_experience-2'},
            {'url': function(r, extr){return '/api/v1/candidates/me/work_experience/'+extr.work_experienceId}, 'title': 'delete-work_experience', method:"DELETE"},
            {'url': function(r, extr){return '/api/v1/candidates/me/work_experience'}, 'title': 'list-work_experience-3'},


            {'url': '/api/v1/candidates/me/signup_stage', 'title': 'candidate-stage-WorkExperience'},

            {'title': 'Target Position'},
            {'url': function(r, extr){return '/api/v1/candidates/me/target_positions'}, 'title': 'list-target_position'},
            {'url': function(r, extr){return '/api/v1/candidates/me/target_positions'}, 'title': 'create-target_position',
              data: {"company_type": "startup", "role":"Java Developer", 'skill': "PHP",
                benefits:"Free Breakfasts", minimum_salary: 100000},
              extract:   function(r, extr){return {target_positionId: r.id}}},
            {'url': function(r, extr){return '/api/v1/candidates/me/target_positions'}, 'title': 'create-target_position-2',
              data: {"company_type": "top500", "role":"Senior Designer", 'skill': "Java", benefits:"Free Breakfasts", minimum_salary: 40000, seniority: "senior"}},
            {'url': function(r, extr){return '/api/v1/candidates/me/target_positions'}, 'title': 'list-target_position-2'},
            {'url': function(r, extr){return '/api/v1/candidates/me/target_positions/'+extr.target_positionId}, 'title': 'delete-target_position', method:"DELETE"},
            {'url': function(r, extr){return '/api/v1/candidates/me/target_positions'}, 'title': 'list-target_position-3'},

            {'url': '/api/v1/candidates/me/signup_stage', 'title': 'candidate-stage-TargetPosition'},

            {'sectionTitle': 'Cleanup'},
            {'url': function(r, extr){return '/api/v1/candidates/logout'}, 'title': 'candidate-logout'},
            {'url': function(r, extr){return '/api/v1/candidates/'+extr.candidateId}, 'title': 'candidate-delete', method:"DELETE"}
          ];

  $(function(){getTestRunner(tests)(0, {});})
</script>
</%def>
