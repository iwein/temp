<%inherit file="../debug.html"/>
<%namespace file="candidate.html" name="candidate" />

<%def name="title()">Candidate Autogenerated Summary</%def>

<%def name="scripts()">
<script src="/debug/static/candidate_signup.js"></script>
</%def>

<%def name="tests()">
<script>
    var cand_email = '${email.replace('@', "+candidate-'+guid()+'@")|n}',

            tests = CANDIDATE_SIGNUP(cand_email, true)
                    .concat([
                        {url: function(r, extr){return '/api/v1/candidates/me/skills'},
                            title: 'set-skills', method:'PUT', data: [
                            {"skill": "PHP", "level":"advanced"}
                        ]},
                        {'title': 'Summary-1'},

                        {url: '/api/v1/candidates/me', title: 'summary',
                            resultFormat: function(resp, format, indent){
                                return resp.summary
                            }}
                    ]).concat(CANDIDATE_COMPLETE_PROFILE(cand_email, true))
                    .concat([
                        {url: function(r, extr){return '/api/v1/candidates/me/skills'},
                            title: 'set-skills', method:'PUT', data: [
                            {"skill": "PHP", "level":"advanced"},
                            {"skill": "Java", "level":"advanced"},
                            {"skill": "Python", "level":"basic"},
                            {"skill": "Spring", "level":"expert"},
                            {"skill": "SingStar"},
                            {"skill": "SegaGames", level:null}
                        ]},
                        {'title': 'Summary-2'},
                        {url: '/api/v1/candidates/me', title: 'summary',
                            resultFormat: function(resp, format, indent){
                                return resp.summary
                            }}
                    ]).concat([
                        {url: function(r, extr){return '/api/v1/candidates/me/skills'},
                            title: 'set-skills', method:'PUT', data: [
                            {"skill": "PHP", "level":"advanced"},
                            {"skill": "Java", "level":"advanced"},
                            {"skill": "Python", "level":"basic"},
                            {"skill": "Spring", "level":"advanced"}
                        ]},
                        {'title': 'Summary-3'},
                        {url: '/api/v1/candidates/me', title: 'summary',
                            resultFormat: function(resp, format, indent){
                                return resp.summary
                            }}
                    ])
                    .concat([
                        {url: function(r, extr){return '/api/v1/candidates/me/preferred_locations'},
                            title: 'set-preferred_locations-1', method:'PUT',
                            data: {DE: []}
                        },
                        {'title': 'Summary-4'},
                        {url: '/api/v1/candidates/me', title: 'summary',
                            resultFormat: function(resp, format, indent){
                                return resp.summary
                            }}
                    ]);

    $(function(){getTestRunner(tests)(0, {});})
</script>
</%def>
