---
template: template.html
path: /login.html
modified: 2015-01-07
title: Login
lang: en
---

<div class="alert-container">
  <div id="error" class="alert alert-danger not-visible">
    Unknown email or password.
  </div>
</div>

<div class="banner">
  <div class="banner-inner banner-inner-small">
    <div class="banner-login">
      <h3>Enter as candidate or employer</h3>
      <form id="login-form">

        <div class="form-group required row">
          <label class="col-sm-4">Email</label>
          <div class="col-sm-8">
            <input class="form-control" type="email" name="email" required>
          </div>
        </div>
        <div class="form-group required row">
          <label class="col-sm-4">Password</label>
          <div class="col-sm-8">
            <input class="form-control" type="password" name="password" required>
          </div>
        </div>
        <div class="buttons-wrap">
          <button type="submit" class="fl-rg bg-green btn-small mrg-lft-small">Login</button>
          <a class="forget" href="forgot-password.html">Forgot your password?</a>
          <div class="clearfix"></div>
        </div>
        <div class="signup-link">Donâ€˜t have a login yet, sign up <a href="candidate/#/signup" class="orange">here</a>.</div>
        <div class="clearfix"></div>
      </form>
    </div>
  </div>
</div>

<script type="text/javascript">
  (function() {
    'use strict';
    var url = app.api_url + 'v1/login';
    var $form = document.getElementById('login-form');
    var $email = document.getElementsByName('email')[0];
    var $password = document.getElementsByName('password')[0];
    var $error = document.getElementById('error');

    $form.addEventListener('submit', function(event) {
      event.preventDefault();
      request(url, {
        email: $email.value,
        pwd: $password.value,
      }, function(response) {
        if (response.status === 404)
          return showError();

        var data = JSON.parse(response.responseText);
        document.location = data.preferred;
      });
    }, true);


    function showError() {
      show($error);
      setTimeout(hide.bind(null, $error), 5000);
    }

    function show(element) {
      element.style.display = 'block';
    }

    function hide(element) {
      element.style.display = 'none';
    }

    function request(url, data, callback) {
      var xhr = new XMLHttpRequest();
      xhr.open('POST', url);
      xhr.setRequestHeader('Content-Type', 'application/json');
      xhr.withCredentials = true;
      xhr.send(JSON.stringify(data));
      xhr.addEventListener('readystatechange', function() {
        if (xhr.readyState === 4)
          callback(xhr);
      });
    }
  })();
</script>
