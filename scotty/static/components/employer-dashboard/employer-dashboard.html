<div class="component-employer-dashboard" ng-show="ready">
  <div class="inner">
    <div class="status-wrap"></div>
    <div class="row">
      <div class="col-sm-3">
        <div class="row timeline-head">
          <div class="col-sm-2 no-padd-right">
            <div class="dot"><i class="fa fa-circle"></i></div>
          </div>
          <div class="col-sm-10 date">{{ today | momentDate }}</div>
        </div>

        <div class="row">
          <div class="timeline">
            <div class="gray-bar"></div>
            <div class="timeline-start"></div>
          </div>
        </div>

        <div class="row timeline-item" ng-repeat="entry in news">
          <div class="col-sm-2 no-padd-right rel">
            <div class="news-ico" ng-class="{
              'news-ico-profile-signup': entry.name === 'SIGN_UP',
              'news-ico-profile-pending': entry.name === 'PROFILE_PENDING',
              'news-ico-profile-live': entry.name === 'PROFILE_LIVE',
              'news-ico-offer-received': entry.name === 'OFFER_RECEIVED',
              'news-ico-offer-rejected': entry.name === 'OFFER_REJECTED',
              'news-ico-offer-accepted': entry.name === 'OFFER_ACCEPTED',
              'news-ico-offer-negotiation': entry.name === 'OFFER_NEGOTIATION',
              'news-ico-offer-signed': entry.name === 'OFFER_SIGNED',
              'news-ico-offer-start-date': entry.name === 'OFFER_START_DATE',
              'news-ico-offer-bookmarked-employer': entry.name === 'BOOKMARKED_EMPLOYER',
              'news-ico-offer-received': entry.name === 'OFFER_SENT',
            }"></div>
          </div>
          <div class="col-sm-10">
            <div class="date">{{ entry.date | timeAgoIf:'yesterday' }}</div>
            <div class="note" ng-if="entry.name === 'SIGN_UP'">You signed up.</div>
            <div class="note" ng-if="entry.name === 'BOOKMARKED'">
              <a ui-sref="candidate({ id: entry.candidate.id })">
                {{ entry.candidate.first_name }} {{ entry.candidate.last_name }}
              </a>
              has bookmarked you.
            </div>
            <div class="note" ng-if="entry.name === 'OFFER_ACCEPTED'">
              Brilliant you have accepted an interview with
              <a ui-sref="candidate({ id: entry.candidate.id })">
                {{ entry.candidate.first_name }} {{ entry.candidate.last_name }}.
              </a>
            </div>
            <div class="note" ng-if="entry.name === 'OFFER_REJECTED'">
              Offer sent to
              <a ui-sref="candidate({ id: entry.candidate.id })">
                {{ entry.candidate.first_name }} {{ entry.candidate.last_name }}
              </a>
              was rejected.
            </div>
            <div class="note" ng-if="entry.name === 'OFFER_SENT'">
              You sent an offer to
              <a ui-sref="candidate({ id: entry.candidate.id })">
                {{ entry.candidate.first_name }} {{ entry.candidate.last_name }}.
              </a>
            </div>
            <div class="note" ng-if="entry.name === 'OFFER_START_DATE'">
              Amazing! You started working with
              <a ui-sref="candidate({ id: entry.candidate.id })">
                {{ entry.candidate.first_name }} {{ entry.candidate.last_name }}.
              </a>
            </div>
            <div class="note" ng-if="entry.name === 'OFFER_NEGOTIATION'">
              Nearly there, you have started negotiating the details with
              <a ui-sref="candidate({ id: entry.candidate.id })">
                {{ entry.candidate.first_name }} {{ entry.candidate.last_name }}.
              </a>
            </div>
            <div class="note" ng-if="entry.name === 'OFFER_SIGNED'">
              Winning! you have signed a contract with
              <a ui-sref="candidate({ id: entry.candidate.id })">
                {{ entry.candidate.first_name }} {{ entry.candidate.last_name }}
              </a>
              and will receive your golden handshake soon
            </div>
            <div class="note" ng-if="entry.name === 'PROFILE_PENDING'">
              You agreed terms and conditions
            </div>
            <div class="note" ng-if="entry.name === 'PROFILE_LIVE'">
              Congrats! You were approved!
            </div>
          </div>
        </div>
      </div>

      <div class="col-sm-6">
        <div class="row">
          <div class="col-sm-12 bg-gray-light mrg-btm" ng-class="{ 'no-results': !searchCandidates.length }">
            <div class="search-box">
              <h4 class="search-box-title">Search for candidates</h4>
              <div class="row">
                <div class="col-sm-6">
                  <div class="row">
                    <div class="col-sm-3 search-label">Skills</div>
                    <div class="col-sm-9 no-padd-left">
                      <select class="form-control"
                        name="country"
                        ng-disabled="loading"
                        ng-model="terms.role"
                        ng-options="role for role in featuredRoles">
                        <option value="">Select...</option>
                      </select>
                    </div>
                  </div>
                </div>
                <div class="col-sm-6">
                  <div class="row">
                    <div class="col-sm-3 search-label">Skills</div>
                    <div class="col-sm-9 no-padd-left">
                      <hc-label-typeahead
                        placeholder="Skills"
                        ng-model="terms.skills"
                        hc-source="dashboard.searchSkills($viewValue)">
                      </hc-label-typeahead>
                    </div>
                  </div>
                </div>
                <div class="col-sm-6">
                  <div class="row">
                    <div class="col-sm-3 search-label no-padd-left">Location</div>
                    <div class="col-sm-9 no-padd-left">
                      <hc-label-typeahead
                        name="cities"
                        placeholder="Type a city..."
                        ng-disabled="loading"
                        ng-model="terms.locations"
                        hc-render="locationToText($entry)"
                        hc-source="searchCities($viewValue)">
                      </hc-label-typeahead>
                    </div>
                  </div>
                </div>
                <div class="col-sm-6">
                  <div class="row">
                    <div class="col-sm-3 search-label">Skills</div>
                    <div class="col-sm-9 no-padd-left">
                      <div class="input-group">
                        <span class="input-group-addon">€</span>
                        <input type="dotted-integer"
                          class="form-control"
                          name="salary"
                          ng-disabled="loading"
                          ng-model="terms.salary">
                        <span class="input-group-addon">.00</span>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-sm-12">
                  <div class="buttons-wrap mrg-top">
                    <button type="button" class="fl-rg btn bg-green" ng-click="search()">
                      Search
                    </button>
                  </div>
                </div>
              </div>
            </div>
            <!--the whole box search result must be shown only after the user has selected some-->
            <div class="search-results">
              <div class="search-border"></div>
              <div class="spinner" ng-show="loading"></div>
              <div class="offer-list">
                <hc-candidate
                  ng-repeat="candidate in searchCandidates"
                  ng-model="candidate"
                  hc-link-profile>
                </hc-candidate>
                <ul class="pager-list">
                  <li ng-repeat="page in pages">
                    <button type="button" ng-click="loadPage(page - 1)">{{ page }}</button>
                  </li>
                <ul>
              </div>
            </div>
              <!--end item-->
          </div>


          <div class="col-sm-12 bg-white">
            <h2 class="main-title">WE SUGGEST</h2>
            <h3 class="main-subtitle pad-all-15 ">Top candidates fitting to your company‘s Profile!</h3>

            <div ng-show="!suggested.length" class="pad-btm-15 pad-lft-15">
              Sorry, there are no candidates matching your criteria
            </div>
            <div ng-show="suggested.length">
              <div class="offer-list">
                <hc-candidate
                  ng-repeat="candidate in suggested"
                  ng-model="candidate"
                  hc-link-profile>
                </hc-candidate>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-sm-3 bg-gray-lighter3 border-box padd-vert" ng-show="candidates.length">
        <div class="box-title box-title_left mrg-btm orange">New offer requests</div>
        <div ng-repeat="candidate in candidates">
          <div class="bld">
            <a ui-sref="candidate({ id: candidate._data.id })">
              {{ candidate._data.first_name }}, {{ candidate._data.last_name }}
              <i class="fa fa-angle-right"></i>
            </a>
          </div>
          <div class="mrg-btm-small">
            {{ candidate.position.role }} from {{ candidate._data.location.city }}, {{ candidate._data.location.country_iso }}
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
