<div class="prio bg-red" ng-class="{
  'bg-red': model.status === 'ACTIVE',
  'bg-gray-light': model.status === 'REJECTED',
  'bg-yellow': model.status !== 'ACTIVE' &&  model.status !== 'REJECTED',
}"></div>
<div class="row" ng-class="{ inactive: model.status === 'REJECTED' }">
  <div class="col-sm-3">
    <div class="col-sm-12">
      <div class="caps mrg-btm">Offer No. {{ model.data.reference }}</div>
      <div class="offer-pic" ng-if="!hide.employer" style="background-image: url({{ model.data.employer.logo_url }})"></div>
    </div>
  </div>
  <div class="col-sm-9 pad-0">
    <div class="offer-date">created: {{ model.data.created | moment:"MMMM Do, YYYY" }}</div>
    <div class="row no-gutter">
      <div class="col-sm-3" ng-if="hcRollbackButton && model.canRollback()">
        <div class="rel">
          <button class="btn-offer bg-blue exp"
            ng-disabled="hcDisabled || popups.isOpenBut('rollback')"
            ng-click="model.rollback()">Rollback</button>
        </div>
      </div>

      <div class="col-sm-3" ng-if="hcWithdrawButton && model.canWithdraw()">
        <div class="rel">
          <button class="btn-offer bg-gray exp"
            ng-disabled="hcDisabled || popups.isOpenBut('withdraw')"
            ng-click="popups.toggle('withdraw')">Withdraw</button>

          <form class="reject-wrap" ng-show="popups.isOpen('withdraw')" ng-submit="withdraw(model, withdrawal)">
            <div class="form-group">
              <div ng-repeat="reason in withdrawReasons">
                <label>
                  <input type="radio"
                    name="rejectReason"
                    value="{{ reason }}"
                    ng-disabled="hcDisabled"
                    ng-required="!withdrawal.reason"
                    ng-model="withdrawal.reason"
                    ng-change="withdrawal.rejected_text = null">
                  {{ reason }}
                </label>
              </div>
            </div>

            <div class="form-group required"
              ng-if="withdrawal.reason.toLowerCase() === 'other'">
              <label>Please describe your reason</label>

              <textarea
                class="form-control"
                placeholder="Please describe your reason"
                required
                ng-disabled="hcDisabled"
                ng-model="withdrawal.withdrawal_reason">
              </textarea>
            </div>

            <div class="form-group">
              <button type="submit" class="btn btn-primary" ng-disabled="hcDisabled">Submit</button>
            </div>
          </form>
        </div>
      </div>

      <div class="col-sm-3" ng-if="hcRejectButton && model.canReject()">
        <div class="rel">
          <button class="btn-offer bg-red exp"
            ng-disabled="hcDisabled || popups.isOpenBut('reject')"
            ng-click="popups.toggle('reject')">Reject</button>

          <form class="reject-wrap" ng-show="popups.isOpen('reject')" ng-submit="reject(model, rejection)">
            <div ng-repeat="reason in rejectReasons">
              <label>
                <input type="radio"
                  name="rejectReason"
                  value="{{ reason }}"
                  ng-disabled="hcDisabled"
                  ng-required="!rejection.reason"
                  ng-model="rejection.reason"
                  ng-change="rejection.rejected_text = null">
                {{ reason }}
              </label>
            </div>

            <div ng-if="rejection.reason.toLowerCase() === 'other'">
              <label>Please describe your reason</label>

              <textarea
                class="form-control"
                placeholder="Please describe your reason"
                required
                ng-disabled="hcDisabled"
                ng-model="rejection.rejected_text">
              </textarea>
            </div>

            <div>
              <label>
                <input type="checkbox"
                  ng-disabled="hcDisabled"
                  ng-model="rejection.blacklist">
                Block employer
              </label>
            </div>

            <button type="submit" class="btn btn-primary" ng-disabled="hcDisabled">Submit</button>
          </form>
        </div>
      </div>

      <div class="col-sm-3" ng-if="hcAcceptButton && model.canAccept()">
        <div class="rel">
          <button class="btn-offer bg-green exp"
            ng-disabled="hcDisabled || popups.isOpenBut('accept')"
            ng-click="popups.toggle('accept')">Accept</button>

          <form class="reject-wrap" ng-show="popups.isOpen('accept')" ng-submit="accept(model, acceptance)">
            <div>
              <label>Email address</label>
              <input type="email"
                class="form-control"
                name="contactEmail"
                required
                ng-model="acceptance.email">

              <div class="form-error" ng-show="formProfile.contactEmail.$dirty && formProfile.contactEmail.$invalid">
                <span ng-show="formProfile.contactEmail.$error.required">Please insert your phone.</span>
              </div>
            </div>

            <div>
              <label>Phone number</label>
              <input type="tel"
                class="form-control"
                name="phoneNumber"
                pattern="^\+?[0-9 /()-]+$"
                ng-pattern="/^\+?[0-9 /()-]+$/"
                ng-disabled="hcDisabled"
                ng-model="acceptance.phone">

              <div class="form-error" ng-show="formProfile.phoneNumber.$dirty && formProfile.phoneNumber.$invalid">
                <span ng-show="formProfile.phoneNumber.$error.required">Please insert your phone.</span>
                <span ng-show="formProfile.phoneNumber.$error.pattern">Valid chacters are: Numbers - / ( )</span>
              </div>
            </div>

            <div class="form-group">
              <button type="submit" class="btn btn-primary" ng-disabled="hcDisabled">Submit</button>
            </div>
          </form>
        </div>
      </div>

      <!--
      <span ng-if="hcNextStatusButton && model.canNextStatus()">
        <button type="button"
          class="btn btn-primary"
          ng-disabled="hcDisabled || withdrawing || rejecting || accepting || signing"
          ng-click="model.nextStatus().then(onStatusChange)">
          {{ model.getNextStatusText() }}
        </button>
      </span>
      -->

      <div class="col-sm-3" ng-if="hcSignedButton && model.canSign()">
        <div class="rel">
          <button class="btn-offer bg-green exp"
            ng-disabled="hcDisabled || popups.isOpenBut('sign')"
            ng-click="popups.toggle('sign')">Contract signed</button>

          <form class="reject-wrap" ng-show="popups.isOpen('sign')" ng-submit="sign(model, signedData)">
            <div>
              <label>Start date</label>

              <input type="date"
                class="form-control"
                placeholder="YYYY-MM-DD"
                required
                ng-disabled="hcDisabled"
                ng-model="signedData.start_date">
            </div>

            <div>
              <label>Start salary</label>

              <input type="dotted-integer"
                class="form-control"
                placeholder="Start salary"
                required
                ng-disabled="hcDisabled"
                ng-model="signedData.start_salary">
            </div>

            <div>
              <button type="submit" class="btn btn-primary" ng-disabled="hcDisabled">Submit</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
  <div class="col-sm-9 pad-0 padd-vert">
    <div class="row no-gutter font-12">
      <div class="col-sm-4">
        <div class="col-sm-4 mrg-btm-small">
          <span class="lbl">Status</span>
        </div>
        <div class="col-sm-6  mrg-btm-small">
          <span class="iconParent"><i class="fa" ng-class="{
            'blue-light':
              model.status === 'ACCEPTED' ||
              model.status === 'ACTIVE' ||
              model.status === 'INTERVIEW' ||
              model.status === 'NEGOTIATING' ||
              model.status === 'CONTRACT_SIGNED' ||
              model.status === 'WITHDRAWN' ||
              model.status === 'EXPIRED',

            'fa-toggle-on':
              model.status === 'ACTIVE' ||
              model.status === 'ACCEPTED',

            'fa-exchange':
              model.status === 'NEGOTIATING' ||
              model.status === 'CONTRACT_SIGNED',

            'red': model.status === 'REJECTED',
            'fa-toggle-off': model.status === 'REJECTED',
            'fa-comments': model.status === 'INTERVIEW',
          }"></i></span>
          {{ model.statusText }}
        </div>
        <div class="col-sm-4  mrg-btm-small">
          <span class="lbl">Contact</span>
        </div>
        <div class="col-sm-6 mrg-btm-small">
          <span ng-if="!hide.employer">{{ model.data.employer.email }}</span>
          <span ng-if="!hide.candidate">{{ model.data.candidate.email }}</span>
        </div>
        <div class="col-sm-4 mrg-btm-small">
          <span class="lbl">Employer</span>
        </div>
        <div class="col-sm-6  mrg-btm-small">
          <a class="blue-light bld und" ng-if="hcProfileLinks" ui-sref="employer({ id: model.data.employer.id })">
            {{ model.data.employer.company_name }}
          </a>
        </div>
      </div>
      <div class="col-sm-2">
        <div class="mrg-btm-small"> <span class="iconParent"><i class="fa fa-euro"></i></span>{{ model.data.annual_salary | dottedInteger }} / year</div>
        <div class="mrg-btm-small">
          <span class="iconParent"><i class="fa fa-location-arrow"></i></span>
          {{ model.data.location.city }}, {{ model.data.location.country_iso }}
        </div>
      </div>
      <div class="col-sm-3">
        <div class="col-sm-6 mrg-btm-small" ng-repeat="skill in model.data.technologies">
          <span class="iconParent mrg-lft-small"><i class="fa fa-asterisk yellow"></i></span><strong>{{ skill }}</strong>
        </div>
      </div>
      <div class="col-sm-3">
        <div class="link-wrap">
          <a ng-if="hcLink" ui-sref="offer({ id: model.id })">View offer details <i class="fa fa-angle-right yellow"></i></a>
        </div>
      </div>
    </div>
  </div>
</div>


<!--
<dl class="dl-horizontal">
  <dt ng-if="hcShowId">Offer Number</dt>
  <dd ng-if="hcShowId">{{ model.data.reference }}</dd>
  <dt>Status</dt>
  <dd><span class="label label-default" ng-class="{
    'label-success': model.status === 'ACCEPTED' || model.status === 'CONTRACT_SIGNED',
    'label-danger': model.status === 'REJECTED',
  }">{{ model.statusText }}</span></dd>
  <dt ng-if="!hide.email && model.data.email">Contact email</dt>
  <dd ng-if="!hide.email && model.data.email">{{ model.data.email }}</dd>
  <dt ng-if="!hide.rejectReason && model.status === 'REJECTED'">Reason</dt>
  <dd ng-if="!hide.rejectReason && model.status === 'REJECTED'">
    {{ model.data.rejected_text || model.data.rejected_reason }}
  </dd>
  <dt ng-if="!hide.employer">Employer</dt>
  <dd ng-if="!hide.employer">
    <img class="logo" ng-if="!hide.employerLogo" ng-src="{{ model.data.employer.logo_url }}">
    <span ng-if="!hcProfileLinks">{{ model.data.employer.company_name }}</span>
  </dd>
  <dt ng-if="!hide.candidate">Candidate</dt>
  <dd ng-if="!hide.candidate">
    <img class="avatar" ng-if="!hide.candidatePicture" ng-src="{{ model.data.candidate.picture_url }}">
    <span ng-if="!hcProfileLinks">
      {{ model.data.candidate.first_name }} {{ model.data.candidate.last_name }}
    </span>
    <a ng-if="hcProfileLinks" ui-sref="candidate({ id: model.data.candidate.id })">
      {{ model.data.candidate.first_name }} {{ model.data.candidate.last_name }}
    </a>
  </dd>
  <dt>Created</dt>
  <dd>{{ model.data.created | timeAgo }}</dd>
  <dt ng-if="!hide.location">Location</dt>
  <dd ng-if="!hide.location">{{ model.data.location.city }}, {{ model.data.location.country_iso }}</dd>
  <dt ng-if="!hide.salary">Salary</dt>
  <dd ng-if="!hide.salary">{{ model.data.annual_salary | dottedInteger }} €/year</dd>
  <dt ng-if="!hide.technologies">Technologies</dt>
  <dd ng-if="!hide.technologies">{{ model.data.technologies.join(', ') }}</dd>
  <dt ng-if="!hide.benefits">Benefits</dt>
  <dd ng-if="!hide.benefits">{{ model.data.benefits.join(', ') }}</dd>
  <dt ng-if="!hide.message">Message</dt>
  <dd ng-if="!hide.message">{{ model.data.message }}</dd>
  <dt>Job Description</dt>
  <dd ng-bind-html="model.data.job_description"></dd>
  <dt ng-if="!hide.hiringProcess">Hiring process</dt>
  <dd ng-if="!hide.hiringProcess" ng-bind-html="model.data.interview_details"></dd>
</dl>
-->
