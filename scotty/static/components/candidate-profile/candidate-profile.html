<div class="component-employer-candidate-profile" ng-show="ready">
  <div class="inner">

    <div class="status-wrap">
      <div class="status">
        <button class="fl-rg btn-edit"
          ng-show="!isEditing"
          ng-click="profile.edit()">
          <i class="fa fa-pencil"></i>
          Edit mode
        </button>
        <button class="fl-rg btn-edit"
          ng-show="isEditing && !formOpen"
          ng-click="profile.stopEdit()">
          <i class="fa fa-check"></i>
          Finish editing
        </button>
      </div>
    </div>

      <div class="row">
        <div class="col-sm-3">
          <div class="row">
            <div class="col-sm-12 bg-gray-light mrg-btm">
              <!-- This button has to appear once entered edit mode  and will trigger the edit user pic div-->
              <button class="edit-user-pic-btn">
                <i class="fa fa-camera-retro"></i>
              </button>
              <!-- -->
              <!-- Edit pic div (remove hidden class to display)-->
              <div class="edit-user-pic hidden">
                <div class="bg-gray-lighter3 padd-vert col-sm-12">
                  <h5 class="edit-title">Profile picture</h5>
                  <input class="mrg-btm" type="file" />
                  <div class="col-sm-6 user-pic-preview mrg-btm-small" style="background-image: url({{ user.picture_url }})"></div>
                  <div class="buttons-wrap mrg-btm-small">
                    <button type="button"
                      class="fl-lf bg-gray-lighter2 btn-small"
                      ng-click="languagesForm.cancel()"
                      ng-disabled="loading">
                      Cancel
                    </button>
                    <button type="submit"
                      class="fl-lf bg-green btn-small mrg-lft-small"
                      ng-disabled="loading">
                      Save
                    </button>
                </div>
                </div>
              </div>
              <!-- -->
              <div class="user-pic" style="background-image: url({{ user.picture_url }})"></div>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-12 border-box mrg-btm">
              <div class="padd-vert">
                <div class="mrg-btm-small"> <span class="iconParent"><i class="fa fa-euro orange"></i></span>{{ targetPosition.minimum_salary | dottedInteger }}</div>
                <div> <span class="iconParent"><i class="fa fa-location-arrow orange"></i></span> {{ user.location.city }}, {{ user.location.country_iso }}</div>
              </div>
            </div>

            <div class="col-sm-12 info bg-gray-light mrg-btm">
              <div class="row">
                <div class="contacts">
                  <div class="fl-lf">
                    <span class="box-title box-title_left" href="#">Contacts </span>
                  </div>
                  <div class="fl-rg">
                    <a href="#"><i class="fa fa-github"></i></a>
                    <a href="#"><i class="fa fa-stack-overflow"></i></a>
                    <a href="#"><i class="fa fa-globe"></i></a>
                  </div>
                </div>
                <div class="padd-vert col-sm-12">
                  <div class="smbd orange mrg-btm-small"> <span class="iconParent"><i class="fa fa-envelope orange"></i></span>mail@jimparson.com</div>
                  <div> <span class="iconParent"><i class="fa fa-mobile orange font-22"></i></span>+213 123 4567</div>
                </div>
              </div>
            </div>

            <!-- Age Visa box -->
            <div class="col-sm-12 border-box mrg-btm">
              <div class="padd-vert">
                <div class="mrg-btm-small"> <span class="iconParent"><i class="fa fa-birthday-cake orange"></i> </span> Age {{ user.dob | yearsAgo }}</div>
                <div> <span class="iconParent"><i class="fa orange" ng-class="{
                  'fa-check': user.eu_work_visa,
                  'fa-times': !user.eu_work_visa,
                }"></i></span> has a work visa</div>
              </div>
            </div>

            <!-- Offers box -->
            <div class="col-sm-12 bg-gray-light mrg-btm ">
              <div class="bg-gray-light row">
                <div class="offer-box col-sm-12">
                  <div class="box-title box-title_left mrg-btm">Offers</div>
                  <div>
                    <div class="orange bld"><a href="#">Hack and Craft <i class="fa fa-angle-right"></i></a></div>
                    <div class="mrg-btm-small">€ 90.0000</div>
                  </div>
                  <a href="#" class="fl-rg smbd gray">View all <i class="fa fa-angle-right"></i></a>
                </div>
              </div>
            </div>

            <!-- Availability box -->
            <div class="col-sm-12 bg-gray-light mrg-btm padd-vert">
              <div class="box-title box-title_left mrg-btm">Availability
                <button type="submit"
                  class="btn-edit-sub"
                  ng-show="isEditing && !formOpen"
                  ng-disabled="loading"
                  ng-click="availabilityForm.edit(availability)">
                  <i class="fa fa-pencil"></i>
                </button>
              </div>
              <p class="gray">{{ user.availability || 'Not specified' }}</p>
            </div>
            <div class="col-sm-12 bg-gray-lighter3 mrg-btm padd-vert" >
               <h5 class="edit-title">Languages <span> 0 characters left</span><h5>
              <form class="edit-form">
                <textarea class=""></textarea>
                <div class="buttons-wrap">
                  <button type="submit"
                    class="fl-rg bg-green btn-small mrg-lft-small"
                    ng-disabled="loading">
                    Save
                  </button>
                  <button type="button"
                    class="fl-rg bg-gray-lighter2 btn-small"
                    ng-click="languagesForm.cancel()"
                    ng-disabled="loading">
                    Cancel
                  </button>
                </div>
              </form>
            </div>

            <!-- Languages box -->
            <div class="col-sm-12 bg-gray-light mrg-btm padd-vert" ng-hide="isEditing && languages.editing">
              <div class="box-title box-title_left mrg-btm">Languages
                <button type="submit"
                  class="btn-edit-sub"
                  ng-show="isEditing && !formOpen"
                  ng-disabled="loading"
                  ng-click="languages.edit()">
                  <i class="fa fa-pencil"></i>
                </button>
              </div>
              <div ng-repeat="entry in languages.data">
                <span class="value gray">{{ entry.language }}: <span class="smbd">({{ entry.proficiency }})</span></span>
              </div>
            </div>
            <div class="col-sm-12 bg-gray-lighter3 mrg-btm padd-vert" ng-if="isEditing && languages.editing">
              <hc-languages-form
                ng-model="languages.data"
                hc-disabled="loading"
                on-submit="languages.save($model, $form)">
                <div class="buttons-wrap">
                  <button type="submit"
                    class="fl-rg bg-green btn-small mrg-lft-small"
                    ng-disabled="loading">
                    Save
                  </button>
                  <button type="button"
                    class="fl-rg bg-gray-lighter2 btn-small"
                    ng-click="languages.cancel()"
                    ng-disabled="loading">
                    Cancel
                  </button>
                </div>
              </hc-languages-form>
            </div>
            <!-- End Languages box -->

          </div>
        </div>


        <!-- MAIN CONTENT -->
        <div class="col-sm-9">
          <!-- Edit target position div (remove class hidden to display)-->
          <div class="edit-tarpos hidden">
            <div class="col-sm-5">
              <h5 class="edit-title">Profile picture</h5>
              <form class="edit-form">
                <select
                        class="form-control"
                        >
                  <option value="">Select...</option>
                </select>
                <div class="buttons-wrap">
                  <button type="submit"
                    class="fl-rg bg-green btn-small mrg-lft-small"
                    ng-disabled="loading">
                    Save
                  </button>
                  <button type="button"
                    class="fl-rg bg-gray-lighter2 btn-small"
                    ng-click="languages.cancel()"
                    ng-disabled="loading">
                    Cancel
                  </button>
                </div>
              </form>
            </div>
          </div>
          <!-- END target position div -->

          <!-- Summary box (remove class hidden to display)-->
            <div class="edit-summary hidden" >
              <h5 class="edit-title">Languages <span> 0 characters left</span></h5>
              <div class="row">
                <div class="col-sm-5">
                  <form class="edit-form">
                    <textarea class="fw"></textarea>
                    <div class="buttons-wrap">
                      <button type="submit"
                        class="fl-rg bg-green btn-small mrg-lft-small"
                        ng-disabled="loading">
                        Save
                      </button>
                      <button type="button"
                        class="fl-rg bg-gray-lighter2 btn-small"
                        ng-click="languagesForm.cancel()"
                        ng-disabled="loading">
                        Cancel
                      </button>
                    </div>
                  </form>
                </div>
              </div>
            </div>
          <!-- END summary box -->

          <div class="row">
             <div class="col-sm-8 bg-white">
                <div class="row">
                  <div class="col-sm-12">
                    <div class="user-desc">
                      <div class="">
                        <h2 class="main-title">{{ user.first_name }} {{ user.last_name }} <i class="bookmark bookmark_inactive bookmark_active"></i></h2>
                      </div>
                      <div class="emp-off-desc">
                        <h3 class="main-subtitle">
                          Target position: 
                          <span>{{ targetPosition.role }}</span> 
                          <button type="submit"
                            class="btn-edit-sub no-fl"
                            ng-show="isEditing && !formOpen"
                            ng-disabled="loading"
                            ng-click="availabilityForm.edit(availability)">
                            <i class="fa fa-pencil"></i>
                          </button>
                        </h3>
                        <div>
                          <p>{{ user.summary }} <button type="submit"
                            class="btn-edit-sub no-fl"
                            ng-show="isEditing && !formOpen"
                            ng-disabled="loading"
                            ng-click="availabilityForm.edit(availability)">
                            <i class="fa fa-pencil"></i>
                          </button></p>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="col-sm-4 bg-white user-desc">
                <div class="fl-rg pad-20  ">
                  <span>Status: </span>
                  <span ng-show="status === 'searching'">
                    <span class="iconParent blue-link"><i class="fa fa-search"></i></span>
                    <span>searching</span>
                  </span>
                  <span ng-show="status === 'reviewing'">
                    <span class="iconParent blue-link"><i class="fa fa-eye"></i></span>
                    <span>reviewing offer</span>
                  </span>
                  <span ng-show="status === 'hired'">
                    <span class="green smbd">HIRED</span>
                  </span>
                </div>
              </div>
              <div class="col-sm-12 mrg-btm">
                <div class="row">
                  <div class="border-box clearfix skills-box">
                    <div class="wrap-form-skills bg-gray-lighter3" ng-if="isEditing && skills.editing">
                      <hc-skills-form
                        ng-model="skills.data"
                        hc-disabled="loading"
                        on-submit="skills.save($model, $form)">
                        <div class="buttons-wrap">
                          <button type="submit"
                            class="fl-rg bg-green btn-small mrg-lft-small"
                            ng-disabled="loading">
                            Save
                          </button>
                          <button type="button"
                            class="fl-rg bg-gray-lighter2 btn-small"
                            ng-click="skills.cancel()"
                            ng-disabled="loading">
                            Cancel
                          </button>
                        </div>
                      </hc-skills-form>
                    </div>
                    <button type="submit"
                      class="btn-edit-sub-skills"
                      ng-show="isEditing && !formOpen"
                      ng-disabled="loading"
                      ng-click="skills.edit(skills)">
                      <i class="fa fa-pencil"></i>
                    </button>
                    <div class="col-sm-3">
                      <div class="skills-head">
                        <div class="big-title skills-title">SKILLS

                        </div>
                        <div class="caption">
                          <div>expert  <hc-stars hc-value="expert" hc-values="starValues"></hc-stars></div>
                          <div>advanced <hc-stars hc-value="advanced" hc-values="starValues"></hc-stars></div>
                          <div>basic <hc-stars hc-value="basic" hc-values="starValues"></hc-stars></div>
                        </div>
                      </div>
                    </div>
                    <div class="col-sm-9">
                      <div class="skills-wrap row">
                        <div class="col-sm-4" ng-repeat="entry in skills.data">
                          <div class="skills-item">{{ entry.skill }}
                            <hc-stars ng-model="entry.level" hc-values="starValues"></hc-stars>
                          </div>
                        </div>
                        <div class="col-sm-12">
                          <div class="skills-others">
                            <span class="smbd">Others:</span> {{ unleveledSkills }}
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
          </div>

          <div class="row bg-white">
            <div class="job-bar">
              <div class="job-bar-item" ng-repeat="entry in timeline"  style="width: {{ entry.percent }}%">
                <div class="job-bar-item_up" title="{{ entry.duration | yearMonth }}" ng-class="{
                  'bg-gray-light': $even,
                  'bg-blue-light': $odd,
                }">{{ entry.duration | yearMonth:entry.percent }}</div>
                <div class="job-bar-item_down" title="{{ entry.role }}">{{ entry.percent > 5 && entry.role || '' }}</div>
              </div>
            </div>
          </div>

          <div class="row bg-white mrg-btm">
            <div class="col-sm-12">
              <h2 class="big-title accordion-main-title">
                WORK EXPERIENCE <span>6 year 1 month</span>
                <button class="add-btn" ng-show="isEditing && !formOpen" ng-click="experience.add()">
                  <i class="fa fa-plus"></i> ADD
                </button>
              </h2>
              <div class="accordion-wrap">
                <!-- Add panel -->
                <div class="add-panel" ng-show="experience.editing === -2">
                  <button class="add-panel-close" ng-click="experience.close()"><i class="fa fa-close"></i></button>
                  <hc-experience-form
                    hc-scope="experience"
                    name="form"
                    hc-required="model.length === 0 || !experience.form.isPristine()"
                    hc-disabled="loading"
                    on-submit="experience.save($model, $form, model.length)">

                    <div class="row">
                      <div class="buttons-wrap">
                        <button type="submit" class="fl-rg bg-green btn-small mrg-lft-small">save</button>
                        <button type="button" class="fl-rg bg-gray-lighter2 btn-small" ng-click="experience.close()">cancel</button>
                      </div>
                    </div>
                  </hc-experience-form>
                </div>
                <!--End  Add panel -->
                <div ng-repeat="entry in experience.data">
                  <!-- EDIT panel -->
                  <div class="add-panel" ng-if="experience.editing === $index">
                    <button class="add-panel-close" ng-click="experience.close()"><i class="fa fa-close"></i></button>
                    <hc-experience-form
                      ng-model="entry"
                      hc-required="true"
                      hc-disabled="loading"
                      on-submit="experience.save($model, $form, $index)">
                      <div class="row">
                        <div class="buttons-wrap">
                          <button type="submit" class="fl-rg bg-green btn-small mrg-lft-small">save</button>
                          <button type="button" class="fl-rg bg-gray-lighter2 btn-small" ng-click="experience.close()">cancel</button>
                        </div>
                      </div>
                    </hc-experience-form>
                  </div>
                  <!--End  EDIT panel -->
                  <hc-accordion ng-hide="experience.editing === $index">
                    <button type="button"
                      class="btn btn-default pull-right"
                      ng-show="isEditing && !formOpen"
                      ng-disabled="loading"
                      ng-click="experience.edit(entry, $index)">
                      Edit
                    </button>
                    <h3 class="accordion-subtitle">{{ entry.role }}</h3>
                    <h4 class="accordion-subtitle2">{{ entry.company }}</h4>
                    <span class="accordion-date">{{ entry.start }} – {{ entry.end || 'today' }} ({{ entry | displayMonths }})</span>
                    <!-- WARN: replaced UI by DIV -->
                    <div class="accordion-text">{{ entry.summary }}</div>
                  </hc-accordion>
                </div>
              </div>
            </div>
          </div>

          <div class="row bg-white">
            <div class="col-sm-12">
              <h2 class="big-title accordion-main-title">
                EDUCATION <span>Master of Arts</span>
                <button class="add-btn" ng-show="isEditing && !formOpen" ng-click="education.add()">
                  <i class="fa fa-plus"></i> ADD
                </button>
              </h2>
              <div class="accordion-wrap">
                <!-- Add panel -->
                <div class="add-panel" ng-show="education.editing === -2">
                  <button class="add-panel-close" ng-click="education.close()"><i class="fa fa-close"></i></button>
                  <hc-education-form
                    hc-scope="education"
                    name="form"
                    hc-required="model.length === 0 || !education.form.isPristine()"
                    hc-disabled="loading"
                    on-submit="education.save($model, $form, model.length)">

                    <div class="row">
                      <div class="buttons-wrap">
                        <button type="submit" class="fl-rg bg-green btn-small mrg-lft-small">save</button>
                        <button type="button" class="fl-rg bg-gray-lighter2 btn-small" ng-click="education.close()">cancel</button>
                      </div>
                    </div>
                  </hc-education-form>
                </div>
                <!--End  Add panel -->
                <div ng-repeat="entry in education.data">
                  <!-- EDIT panel -->
                  <div class="add-panel" ng-if="education.editing === $index">
                    <button class="add-panel-close" ng-click="education.close()"><i class="fa fa-close"></i></button>
                    <hc-education-form
                      ng-model="entry"
                      hc-required="true"
                      hc-disabled="loading"
                      on-submit="education.save($model, $form, $index)">

                      <div class="row">
                        <div class="buttons-wrap">
                          <button type="submit" class="fl-rg bg-green btn-small mrg-lft-small">save</button>
                          <button type="button" class="fl-rg bg-gray-lighter2 btn-small" ng-click="education.close()">cancel</button>
                        </div>
                      </div>
                    </hc-education-form>
                  </div>
                  <!--End  EDIT panel -->
                  <hc-accordion hc-hide-control="!entry.course" ng-hide="education.editing === $index">
                    <button type="button"
                      class="btn btn-default pull-right"
                      ng-show="isEditing && !formOpen"
                      ng-disabled="loading"
                      ng-click="education.edit(entry, $index)">
                      Edit
                    </button>
                    <h3 class="accordion-subtitle">{{ entry.degree }}</h3>
                    <h4 class="accordion-subtitle2">{{ entry.institution }}</h4>
                    <span class="accordion-date">{{ entry.start }} – {{ entry.end || 'today' }} ({{ entry | displayMonths }})</span>
                    <!-- WARN: replaced UI by DIV -->
                    <div class="accordion-text">{{ entry.course }}</div>
                  </hc-accordion>
                </div>
              </div>
            </div>
          </div>

        </div>
      </div>
    </div>
  </div>
</div>
